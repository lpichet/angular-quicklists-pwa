import"./chunk-IP7UDIDS.js";import{$ as H,B as O,D as V,M as x,T as _,U as B,V as I,W as K,X as Z,_ as M,a as R,b as A,ba as q,c as E,d as D,da as G,e as p,f as P,g as w,h as b,i as y,j as h,k as d,l,m as k,n as N,o as g,p as F,q as C,r as U,s as T,u as W,v as j,y as L}from"./chunk-G3MARYFV.js";var $=[{path:"home",loadComponent:()=>import("./chunk-OKHD5GRQ.js")},{path:"checklist/:id",loadComponent:()=>import("./chunk-WFWQ7XUK.js")},{path:"",redirectTo:"/home",pathMatch:"full"}];var v="Service workers are disabled or not supported by this browser";function re(r){return w(()=>D(new Error(r)))}var f=class{constructor(e){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=re(v);else{let t=b(e,"controllerchange").pipe(p(()=>e.controller)),i=w(()=>E(e.controller)),s=P(i,t);this.worker=s.pipe(d(u=>!!u)),this.registration=this.worker.pipe(g(()=>e.getRegistration()));let S=b(e,"message").pipe(p(u=>u.data)).pipe(d(u=>u&&u.type)).pipe(N());S.connect(),this.events=S}}postMessage(e,n){return this.worker.pipe(l(1),F(t=>{t.postMessage(R({action:e},n))})).toPromise().then(()=>{})}postMessageWithOperation(e,n,t){let i=this.waitForOperationCompleted(t),s=this.postMessage(e,n);return Promise.all([s,i]).then(([,a])=>a)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let n;return typeof e=="string"?n=t=>t.type===e:n=t=>e.includes(t.type),this.events.pipe(d(n))}nextEventOfType(e){return this.eventsOfType(e).pipe(l(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(d(n=>n.nonce===e),l(1),p(n=>{if(n.result!==void 0)return n.result;throw new Error(n.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},ne=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,this.pushManager=null,this.subscriptionChanges=new A,!t.isEnabled){this.messages=h,this.notificationClicks=h,this.subscription=h;return}this.messages=this.sw.eventsOfType("PUSH").pipe(p(s=>s.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(p(s=>s.data)),this.pushManager=this.sw.registration.pipe(p(s=>s.pushManager));let i=this.pushManager.pipe(g(s=>s.getSubscription()));this.subscription=y(i,this.subscriptionChanges)}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(v));let i={userVisibleOnly:!0},s=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),a=new Uint8Array(new ArrayBuffer(s.length));for(let o=0;o<s.length;o++)a[o]=s.charCodeAt(o);return i.applicationServerKey=a,this.pushManager.pipe(g(o=>o.subscribe(i)),l(1)).toPromise().then(o=>(this.subscriptionChanges.next(o),o))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(v));let t=i=>{if(i===null)throw new Error("Not subscribed to push notifications.");return i.unsubscribe().then(s=>{if(!s)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(l(1),g(t)).toPromise()}decodeBase64(t){return atob(t)}};e.\u0275fac=function(i){return new(i||e)(T(f))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let r=e;return r})(),ie=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=h,this.unrecoverable=h;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(v));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(v));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}};e.\u0275fac=function(i){return new(i||e)(T(f))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let r=e;return r})();var z=new U("");function se(r,e,n,t){return()=>{if(!(M(t)&&"serviceWorker"in navigator&&n.enabled!==!1))return;let i=r.get(V),s=r.get(I);i.runOutsideAngular(()=>{let o=navigator.serviceWorker,c=()=>o.controller?.postMessage({action:"INITIALIZE"});o.addEventListener("controllerchange",c),s.onDestroy(()=>{o.removeEventListener("controllerchange",c)})});let a;if(typeof n.registrationStrategy=="function")a=n.registrationStrategy();else{let[o,...c]=(n.registrationStrategy||"registerWhenStable:30000").split(":");switch(o){case"registerImmediately":a=E(null);break;case"registerWithDelay":a=Y(+c[0]||0);break;case"registerWhenStable":a=c[0]?y(J(r),Y(+c[0])):J(r);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)}}i.runOutsideAngular(()=>a.pipe(l(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:n.scope}).catch(o=>console.error("Service worker registration failed with:",o))))}}function Y(r){return E(null).pipe(k(r))}function J(r){return r.get(I).isStable.pipe(d(n=>n))}function oe(r,e){return new f(M(e)&&r.enabled!==!1?navigator.serviceWorker:void 0)}var m=class{};function Q(r,e={}){return j([ne,ie,{provide:z,useValue:r},{provide:m,useValue:e},{provide:f,useFactory:oe,deps:[m,O]},{provide:B,useFactory:se,deps:[L,z,m,O],multi:!0}])}var X={providers:[K({eventCoalescing:!0}),G($),Q("ngsw-worker.js",{enabled:!Z(),registrationStrategy:"registerWhenStable:30000"})]};var ee=(()=>{let e=class e{constructor(){this.title="angular-quicklists-pwa"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=W({type:e,selectors:[["app-root"]],standalone:!0,features:[_],decls:1,vars:0,template:function(i,s){i&1&&x(0,"router-outlet")},dependencies:[q],encapsulation:2});let r=e;return r})();H(ee,X).catch(r=>console.error(r));
